@model ScientificResearch.ViewModel.ERPNWorkToDoViewModel

@{
    Layout = "~/Areas/Education/Views/Shared/_PopUpLayout.cshtml";
}

<script src="../../../../Scripts/ajaxfileupload.js"></script>
@*<script src="../../../../Scripts/Custom/forms.js"></script>*@
<script src="~/Scripts/Custom/forms.js"></script>
<script src="../../../../Scripts/Custom/AboutApprovalNode.js"></script>

<script type="text/javascript">
    var fuJian = "";
    $(function () {
        areadHaveFillIn();
    });
    $(function () {
        $("#btnUploadFile").click(function () {
            if ($("#uploadFile").val().length > 0) {
                ajaxFileUploadFillIn();
            }
            else {
                alert("请选择要上传的文件！！");
            }
        })
    })


    $(function () {
        $("input[name='Reported'],input[name='Save'] ").click(function () {
            var errorMessage = "";
            //if ($("#WenHao").val().trim() == "") {
            //    errorMessage = errorMessage + "项目名称不能为空！！！";
            //}
            //if ($("#Text173991076").val().trim() == "") {
            //    errorMessage = errorMessage + "继续进修单位不能为空！！！";
            //}
            //if ($("#Text1544375407").val().trim() == "") {
            //    errorMessage = errorMessage + "邮编不能为空！！！";
            //}
            //if ($("#Date1708221790").val().trim() == "") {
            //    errorMessage = errorMessage + "继举办开始时间不能为空！！！";
            //}
            //if ($("#Date757334737").val().trim() == "") {
            //    errorMessage = errorMessage + "继举办结束时间不能为空！！！";
            //}
            //if ($("#Text509845911").val().trim() == "") {
            //    errorMessage = errorMessage + "举办方式不能为空！！！";
            //}
            //if ($("#Num1376621237").val().trim() == "") {
            //    errorMessage = errorMessage + "举办期限不能为空！！！";
            //}
            //if ($("#Text1325353134").val().trim() == "") {
            //    errorMessage = errorMessage + "考核方式不能为空！！！";
            //}
            //if ($("#Text1745874712").val().trim() == "") {
            //    errorMessage = errorMessage + "教学对象不能为空！！！";
            //}
          
            if (errorMessage == "") {

            }
            else {
                alert(errorMessage);
                return false;
            }
        });
    });

    $(function () {

        $("#Save").click(function () {
            var url1 = "/Education/OutLearning/ApplicationRejected?flag=Save";
            //alert(url1);
            submitForm("form", url1);
        })
        $("#Reported").click(function () {
            var url2 = "/Education/OutLearning/ApplicationRejected?flag=Reported";
            // alert(url2)
            submitForm("form", url2);
        })
    })
</script>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(model => model.NWorkToDoID)
    <div>
        @*<div><b>填写申请书</b> -> @Model.WorkName</div>*@
        @Html.ValidationSummary(true)

        <table id="data" class="table">

            @Html.Raw(Model.FormContent)
            @Html.HiddenFor(model => model.FormContent)
            @Html.ValidationMessageFor(model => model.FormContent)

            <tr>
                <td colspan="6">
                    <input type="file" id="uploadFile" name="file" onchange="CheckFileSize()" />
                </td>
            </tr>
            <tr>
                <td colspan="6">
                    <input type="button" value="上传" id="btnUploadFile" />
                </td>
            </tr>

            <tr>
                <td colspan="2">
                    <div id="areadyuploadfile"></div>
                </td>
                <td colspan="2">
                    <p id="fuJian_Save_P"></p>
                </td>
                <td colspan="2">
                    <div id="table_save"></div>
                </td>
            </tr>

            @if (Model.IsRejected == true && Model.IsTemporary == false)
            {
                <tr>
                    <td colspan="3" style="vertical-align:middle; text-align:center;">
                        <div><input type="submit" value="保&nbsp&nbsp&nbsp存" name="Save" id="Save" class="btn btn-blue" /></div>
                    </td>
                    <td colspan="3" style="vertical-align:middle; text-align:center;">
                        <div> <input type="submit" value="保存并上报" name="Reported" id="Reported" class="btn btn-blue" /></div>
                    </td>
                </tr>
            }

            else if (Model.IsTemporary == true && Model.IsRejected == false)
            {
                <tr>
                    <td colspan="3" style="vertical-align:middle; text-align:center;">
                        已保存
                    </td>
                    <td colspan="3" style="vertical-align:middle; text-align:center;">
                        <input type="submit" value="上&nbsp&nbsp&nbsp报" name="Reported" id="Reported" class="btn btn-blue" />
                    </td>
                </tr>
                <tr>
                    <td colspan="6">
                        <input type="file" id="uploadFile" name="file" onchange="CheckFileSize()" />
                    </td>
                </tr>
                <tr>
                    <td colspan="6">
                        <input type="button" value="上传" id="btnUploadFile" />
                    </td>
                </tr>
            }

            else if (Model.IsTemporary == false && Model.IsRejected == false)
            {

                <script>@Html.Raw(ViewBag.PiLiangSet);</script>

                <tr>
                    <td colspan="6" style="vertical-align:middle; text-align:center;">
                        已上报
                    </td>
                </tr>
            }
        </table>

        @Html.HiddenFor(model => model.WenHao)

        @Html.HiddenFor(model => model.BeiYong1)

        @Html.HiddenFor(model => model.FormID, new { @readOnly = "readOnly " })

        @Html.HiddenFor(model => model.WorkFlowID, new { @readOnly = "readOnly " })

        @Html.HiddenFor(model => model.TimeStr, new { @readOnly = "readOnly " })

        @Html.HiddenFor(model => model.FuJianList)

        @Html.HiddenFor(model => model.ShenPiYiJian)

        @Html.HiddenFor(model => model.JieDianID, new { @readOnly = "readOnly " })

        @Html.HiddenFor(model => model.JieDianName, new { @readOnly = "readOnly " })

        @Html.HiddenFor(model => model.ShenPiUserList)

        @Html.HiddenFor(model => model.OKUserList)

        @Html.HiddenFor(model => model.StateNow)

        @Html.HiddenFor(model => model.LateTime)

        @Html.HiddenFor(model => model.BeiYong2)

        @Html.HiddenFor(model => model.ApplicationId)

        @Html.HiddenFor(model => model.ApplicationStatus)

        @Html.HiddenFor(model => model.NWorkToDoID)
    </div>
}
