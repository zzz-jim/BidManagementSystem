@model ScientificResearch.ViewModel.ERPNWorkToDoViewModel

@{
    Layout = "~/Views/Shared/_PopUpLayout.cshtml";
}

<script src="../../../../Scripts/ajaxfileupload.js"></script>
<script src="../../../../Scripts/Custom/form.js"></script>
<script src="../../../../Scripts/Custom/AboutApprovalNode.js"></script>
<script type="text/javascript">
    $(function () {
        areadHaveFillIn();
    });
    $(function () {
        $("#btnUploadFile").click(function () {
            if ($("#uploadFile").val().length > 0) {
                ajaxFileUploadFillIn();
            }
            else {
                alert("请选择要上传的文件！！");
            }
        })
    })
  
    $(function () {
        $("input[name='Reported'],input[name='Save'] ").click(function () {
            var errorMessage = "";
            if ($("#Num127683006").val().trim() == "") {
                errorMessage = errorMessage + "交费不能为空！！！";
            }
            if ($("#Text1116480190").val().trim() == "") {
                errorMessage = errorMessage + "授课地点不能为空！！！";
            }
            if ($("#Text850602225").val().trim() == "") {
                errorMessage = errorMessage + "授课人不能为空！！！";
            }
            if ($("#TextArea2420602").val().trim() == "") {
                errorMessage = errorMessage + "授课内容不能为空！！！";
            }
            if ($("#TextArea1448879853").val().trim() == "") {
                errorMessage = errorMessage + "听课要求不能为空！！！";
            }
            if ($("#Text1382487444").val().trim() == "") {
                errorMessage = errorMessage + "参加人员不能为空！！！";
            }
            if (errorMessage == "") {

            }
            else {
                alert(errorMessage);
                return false;
            }
        });
    });


</script>

<div id="treeviewwindow" style="width:300px;height:400px;">
    @Html.Partial("_SelectUserPartial")
</div>

    <style type="text/css">
        input[type="text"] {
        width: 150px;
        height: 24px;
        }

    textarea {
        margin: 0px;
        height: 100px;
        width: 500px;
    }
    </style>

@Html.Partial("_ContinuingEducationWizardPartial")

    @using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

  <div class="form-horizontal widget-body">
      
      <input type="hidden" id="Freeze" value="@Model.ApplicationId" />
        <table class="table">
            @Html.ValidationSummary(true)

            @Html.HiddenFor(model => model.NWorkToDoID)

            @Html.HiddenFor(model => model.WorkName)

            @Html.HiddenFor(model => model.ApplicationId)

            @Html.HiddenFor(model => model.FormID)

            @Html.HiddenFor(model => model.WorkFlowID)

            @Html.HiddenFor(model => model.UserName)

            @Html.HiddenFor(model => model.TimeStr)

            @Html.HiddenFor(model => model.FuJianList)

            @Html.HiddenFor(model => model.ShenPiYiJian)

            @Html.HiddenFor(model => model.JieDianID)

            @Html.HiddenFor(model => model.JieDianName)

            @Html.HiddenFor(model => model.ShenPiUserList)

            @Html.HiddenFor(model => model.OKUserList)

            @Html.HiddenFor(model => model.StateNow)

            @Html.HiddenFor(model => model.LateTime)

            @Html.HiddenFor(model => model.BeiYong2)

            @Html.HiddenFor(model => model.ApplicationStatus)

            @Html.HiddenFor(model => model.ApplicationId)

            @Html.HiddenFor(model => model.FormKeys)

            @Html.HiddenFor(model => model.FormValues)

            @Html.HiddenFor(model => model.IsRejected)

            @Html.HiddenFor(model => model.IsLocked)

            @Html.HiddenFor(model => model.IsTemporary)

            @Html.HiddenFor(model => model.IsDeleted)

            @Html.HiddenFor(model => model.ProjectStatus)

            @Html.HiddenFor(model => model.ProjectEstablishTime)

           
                <tr>
                <td>项目名称:</td>
                <td><input id="WenHao" name="WenHao" readonly="readonly" value="@Model.WenHao"/></td>
                 </tr>
            <tr>
                <td>项目编号:</td>
                <td><input id="BeiYong1" name="BeiYong1" readonly="readonly" value="@Model.BeiYong1" /></td>
            </tr>
                
                    @Html.Raw(Model.FormContent)
                    @Html.HiddenFor(model => model.FormContent)
                    @Html.ValidationMessageFor(model => model.FormContent)
               

            @if (ViewBag.act == "Save")
            {
                <tr>
                    <td style="vertical-align:middle; text-align:center;">
                        <input type="submit" value="保存并上报" name="Reported" class="btn btn-blue" />
                    </td>
                    <td style="vertical-align:middle; text-align:center;">
                       已保存
                    </td>
                </tr>

            }
    
            else if(Model.IsTemporary==true)
            {
                <tr>
                    <td style="vertical-align:middle; text-align:center;">
                        <input type="submit" value="保存并上报" name="Reported" class="btn btn-blue" />
                    </td>
                    <td style="vertical-align:middle; text-align:center;">
                       已保存
                    </td>
                </tr> 
            }
            else if (Model.IsRejected == false && Model.IsTemporary == false)
            {

                <script>
                    $("_SelectUserPartial").hide();
                    $("#select").hide();
                </script>
            }
            else
            {
                <tr>
                    <td colspan="2">
                        <p><input type="file" id="uploadFile" name="file" onchange="CheckFileSize()" /></p>
                        <input type="button" value="上传" id="btnUploadFile" />
                        <div id="areaduploadfile"></div>
                    </td>
                </tr>
                <tr>
                    <td style="vertical-align:middle; text-align:center;">
                        <input type="submit" value="保存并上报" name="Reported" class="btn btn-blue" />
                    </td>
                    <td style="vertical-align:middle; text-align:center;">
                        <input type="submit" value="保&nbsp&nbsp&nbsp存" name="Save" class="btn btn-blue" />
                    </td>
                </tr>
            }
        </table>
    </div>
}
<script>@Html.Raw(ViewBag.PiLiangSet);</script>

  