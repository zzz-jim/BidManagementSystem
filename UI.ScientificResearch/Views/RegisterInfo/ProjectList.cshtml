@model IEnumerable<UI.ScientificResearch.Models.ProjectRegistrationViewModel>
@{
    Layout = "~/Views/Shared/_PopUpLayout.cshtml";
}
    <!-- Project Step Wizard -->
@Html.Partial("_ScienceResearchWizardPartial")


<input type="hidden" id="Freeze" value="@ViewBag.Id" />
<div>

    <div id="CreateNewApp">
        <div id="newapplicationbutton">
            <input type="button" id="CreaateButtn" value="报名登记" />
        </div>
        <div id="Application"></div>

    </div>
</div>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.ApplicationId)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CompanyName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ContactName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Phone)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Email)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BidSection)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.IsSubmitRegistrationFee)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RegistrationFee)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.IsSubmitBidBondFee)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BidBondFee)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Remark)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RegisterTime)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.OperatorName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.OperatorId)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CreatedTime)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.ApplicationId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CompanyName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ContactName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Phone)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Email)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BidSection)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IsSubmitRegistrationFee)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.RegistrationFee)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IsSubmitBidBondFee)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BidBondFee)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Remark)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.RegisterTime)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.OperatorName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.OperatorId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CreatedTime)
        </td>
        <td>
            @Html.ActionLink("修改", "Edit", new { id=item.ID }) |
            @Html.ActionLink("详情", "Details", new { id=item.ID }) |
            @Html.ActionLink("删除", "Delete", new { id=item.ID })
        </td>
    </tr>
}

</table>

@section Scripts {
    <script type="text/javascript">
        $(function () {
            var onClose = function () {
                //parent.location.reload();//刷新包含SubmitApplication的页面// TODO:暂时注释掉，每次刷新影响效率
            }
            $("#CreaateButtn").click(function () {
                var random1 = Math.floor(Math.random() * 1000 + 1);
                $("#Application").kendoWindow({
                    position: {
                        top: "15%", // or "100px"
                        left: "13%"
                    },
                    width: "60%",
                    height: "70%",
                    modal: true,
                    draggable: true,
                    resizable: false,
                    title: "报名登记",
                    visible: false,
                    actions: [
                        "Pin",
                        "Close",
                    ],
                    close: onClose
                    //  resizable: false,

                });
                $("#Application").append(' <iframe id="application" width="100%" height="100%" scrolling="yes" style="border:0px" src="/RegisterInfo/Create?applicationId=@ViewBag.Id">项目申请书</iframe>');
                $("#Application").data("kendoWindow").center().open();
            });
        })

    </script>
}
